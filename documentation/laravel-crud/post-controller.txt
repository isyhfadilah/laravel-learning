POST CONTROLLER DOCUMENTATION

---------------------------------------------------------------------------------

namespace App\Http\Controllers

---------------------------------------------------------------------------------

use App\Models\Post

---------------------------------------------------------------------------------

use Illuminate\View\View

---------------------------------------------------------------------------------

use Illuminate\Http\RedirectResponse

---------------------------------------------------------------------------------

use Illuminate\Http\Request

---------------------------------------------------------------------------------

use Illuminate\Support\Facades\Storage

---------------------------------------------------------------------------------

class PostController extends Controller

---------------------------------------------------------------------------------

/**
* index
*
* @return View
*/

---------------------------------------------------------------------------------

public function index(): view

---------------------------------------------------------------------------------

Post::latest()->paginate(5)

---------------------------------------------------------------------------------

return view('posts.index', compact('posts'))

---------------------------------------------------------------------------------

/**
* create
*
* @return View
*/

---------------------------------------------------------------------------------

/**
* store
*
* @param mixed $request
* @return RedirectResponse
*/

---------------------------------------------------------------------------------

public function store(Request $request): RedirectResponse

---------------------------------------------------------------------------------

$this->validate($request, [
    'image' => 'required|image|mimes:jpeg,jpg,png|max:2048',
    'title' => 'required|min:5',
    'content' => 'required|min:10'
])

---------------------------------------------------------------------------------

$image = $request->file('image');
$image->storeAs('public/posts', $image->hashName());

---------------------------------------------------------------------------------

Post::create([
    'image' => $image->hashName(),
    'title' => $request->title,
    'content' => $request->content
]);

---------------------------------------------------------------------------------

return redirect()->route('posts.index')->with(['success' => 'Data berhasil disimpan!']);

---------------------------------------------------------------------------------

/**
* show
*
* @param mixed $id
* @return View
*/

---------------------------------------------------------------------------------

public function show(string $id): View

---------------------------------------------------------------------------------

Post::findOrFail($id);

---------------------------------------------------------------------------------

return view('posts.show', compact('post'));

---------------------------------------------------------------------------------

/**
* edit
*
* @param mixed $id
* @return View
*/

---------------------------------------------------------------------------------

/**
* update
*
* @param mixed $request
* @param mixed $id
* @return RedirectResponse
*/

---------------------------------------------------------------------------------

if($request->hasFile('image'))

---------------------------------------------------------------------------------

$request->file('image')

---------------------------------------------------------------------------------

$image->storeAs('public/posts', $image->hashName());

---------------------------------------------------------------------------------

Storage::delete('public/posts'.$post->image);

---------------------------------------------------------------------------------

$post->update([
    'image' => $image->hashName(),
    'title' => $request->title,
    'content' => $request->content
]);

---------------------------------------------------------------------------------

$post->update([
    'title' => $request->title,
    'content' => $request->content
]);

---------------------------------------------------------------------------------

return redirect()->route('posts.index')->with(['success' => 'Data berhasil diubah!']);

---------------------------------------------------------------------------------

/**
* destroy
*
* @param mixed $post
* @return void
*/

---------------------------------------------------------------------------------

public function destroy($id): RedirectResponse

---------------------------------------------------------------------------------

Storage::delete('public/posts/'.$post->image);

---------------------------------------------------------------------------------

$post->delete();

---------------------------------------------------------------------------------

return redirect()->route('posts.index')->with(['success' => 'Data berhasil dihapus!']);

---------------------------------------------------------------------------------
